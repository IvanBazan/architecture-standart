### <a name="_b7urdng99y53"></a>**Название задачи: MVP цифровизации депозитарных операций** 
### <a name="_hjk0fkfyohdk"></a>**Автор: Ivan Bazanov**
### <a name="_uanumrh8zrui"></a>**Дата: 21.06.2025**
### <a name="_3bfxc9a45514"></a>**Функциональные требования**
Опишите здесь верхнеуровневые Use Cases. Их нужно оформить в виде таблицы с пошаговым описанием:

| **№** | **Действующие лица или системы**                                                                               | **Use Case**                                | **Описание** |
| :---: | :------------------------------------------------------------------------------------------------------------- | :------------------------------------------ | :----------- |
|  UC1  | Пользователь (Клиент новый)<br>Сайт<br>Менеджер колл-центра<br>АБС<br>бэк офис<br>фронт офис<br>СМС шлюз + телеком оператор | *site* <br> открытие депозита для нового клиента | 1. Пользователь заходит на сайт банка<br>2. На сайте банка пользователь видит список доступных депозитов с актуальными ставками<br>3.Пользователь оставляет заявку на депозит, вводит ФИО и телефон<br>4.Менеджер колл-центра обрабатывает заявки и звонит пользователю<br>5.Для идентификации пользователь приходит во фронт-офис банка<br>6.Заявка попадает в АБС её обрабатывает бэк-офис<br>7.Пользователь получает СМС с подтверждением открытия депозита и его параметрами            |
|  UC2  | Пользователь (клиент банка)<br>Интернет-банк<br>СМС шлюз + телеком оператор<br>АБС                             | *webApp* <br> открытие депозита клиентом банка   | 1. Пользователь заходит в приложение Интернет-банка<br>2. В приложении пользователь видит список доступных депозитов с актуальными ставками, а также персональные предложения<br>3. Пользователь отправляет заявку на депозит, указав сумму депозита и счет<br>4.Заявка попадает в АБС её обрабатывает бэк-офис<br>4.Пользователь получает СМС с подтверждением открытия депозита и его параметрами |
|  UC3  | АБС<br>бэк офис                                                                                                | Расчет общих ставок | 1. Ежедневно сотрудники отдела кредитования бэк офиса анализируют ставки рефинансирования Центробанка и количество выданных кредитов и депозитов в банке<br> 2. Они Excel проводят расчет считают ставки <br> 3. Загружают их в АБС |
|  UC4  | АБС<br>бэк офис                                                                                                | Расчет персонализированных ставок |  1. Для клиентов с большими портфелями сотрудники отдела кредитования бэк офиса расчитывают кредитные риски для банка в своём разделе АБС относительно этого клиента <br>2. Сотрудники отдела депозитов бэк офиса расчитывают персональные процентные ставки через Excel <br> 3. Загружают их в АБС    |

### <a name="_u8xz25hbrgql"></a>**Нефункциональные требования**
Опишите здесь нефункциональные требования и архитектурно значимые требования.

| **№** | **Требование** |
| :---: | :------------- |
| R   | Надёжность (Reliability)           |
| R1    | все сервисы должны работать 24/7 и быть доступны в 99,9% случаев |  поэтому лучше избежать прямой работы интернет-банка с API АБС в новом процессе            |
| R2    | использование резервного ЦОД       |
| P   | Производительность (Performance)   |
| P1    |  предусмотреть равномерное горизонтальное масштабирование и распределение запросов между серверами, приложениями и ЦОД                    |
| P2    | АБС может масштабироваться только вертикально из-за своей базы данных  |                
| S   | Поддерживаемость (Supportability)  |
| S1    | Минимизация новых технологий, полная обратная совместимость  |   сотрудники должны понтимать новые технологии хотя бы на уровне языков программирования           |
| S2    | Если нужны очереди сообщений, то лучше использовать Kafka на перспективу                                |
| +R  | + Ограничения (Restrictions)       |
|  +R_site_1   | Необходима интеграция бэкенда сайта с данными АБС по актуальным общим ставкам. Согласно требованию производительности R1 по возможности кэшировать данные, для уменьшения обращения в API АБС|   Кэширование также актуально и для Интернет банка           |
|  +R_site_2   | Реализация TLS на сайте для шифрования клиентских данных|
|  +R_site_3   | Необходима интеграция бэкенда сайта с АБС для внесения заявок на добавление нового клиента. Стоит рассмотреть возможность переиспользования API АБС которыми пользуются колл центры |
|  +R_site_4   | Необходимо настроить передачу информации в системы колл-центра о добавлении нового клиента |
|  +R_webApp_1   | Интернет банк уже имеет систему авторизации пользователей (возможно Oauth+JWT). Его же клиентскую базу необходимо "подружить" с АБС для работы АБС с клиентскими данными|
|  +R_webApp_2   | СМС подтверждение можно попробовать реализовать через существующий функцонал АБС не затрагивая систему интернет банка|
|  +R1   | Система содержит в основном асинхронные операции. Потенциальный перевод на брокер (предлагается Kafka) снизит нагрузку на API АБС    |
|  +R2   | Перенос всей бизнес логики расчетов реализованных в Excel файлах сотрудников бэкофиса в АБС может быть трудоемким и потребует серьёзного тестирования. Для MVP логичнее реализовать автоматизацию загрузки и выгрузки финальных данных напрямую из Excel (Delphi + интефейсные процедуры )  |
|  +R3   | Требуется настроить резервное копирование на случай сбоев системы. Использование резервного ЦОД + сохранение на диск  |



### <a name="_qmphm5d6rvi3"></a>**Решение**
Приведите диаграммы контекста и контейнеров в модели C4. Опишите там основные компоненты и интеграции всех элементов решения. 
```markdown
![Диаграмма контекста](/context.png)
```
```markdown
![Диаграмма контейнеров](/container.png)
```

 1. Реализация АБС
    1. Текущая реализация ORACLE + Deplhi
    Так как требуется настроить взаимодействие с данными и логикой АБС, предлагаю для данного функционала реализовать новый сервис АБС на Java.
    Java сервис будет в дальнейшем проще развивать чем Delphi,
    также возможно его дробление на микросервисы

 2. Использование kafka брокера сообщений для взаимодействия между интернет банком и АБС
 3. В схеме не описана реализация взаимодействия Сайта банка с бэкенд системами. Для получения информации по ставкам возможно подключение к Api интернет банка.

### <a name="_bjrr7veeh80c"></a>**Альтернативы**
 1. отказ от реализации нового Java АБС сервиса
 2. отказ от брокера сообщений

Оба решения упрощения реализации в моменте, но в песпективе могут повлиять на быстродействие системы

 3. Перенос бизнес логики бэкофиса в АБС
 Трудоёмко, высока вероятность ошибок. Требуются системные аналитики либо разработчики погружающиеся в бизнес процессы

**Недостатки, ограничения, риски**

1. Команда АБС специализируется на Delphi, хоть и указано, что имеется у некоторых разработчиков опыт с jаva, могут быть трудности в оценках задач и планировании.
2. Настройка синхронизации пользовательских данных между АБС и Интернет-банком. Требует особо тщательной проверки.
3. У команды разработки нет опыта рабоыт с kafka